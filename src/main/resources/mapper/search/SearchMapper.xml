<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.modu.app.prj.search.mapper.SearchMapper">
 	
 	<!-- 게시글 검색 -->
 	<select id="BpList" resultType="SearchVO" parameterType="SearchVO">
 		 SELECT p.post_uni_no,
				p.brd_uni_no,
				p.ttl,
				p.cm,
				p.partici_memb_uni_no,
				p.post_tag_arm,
				p.reply_arm_yn,
				p.noti_yn,
				p.noti_reg_dt,
				p.write_dt,
				m.nnm
		FROM post p JOIN prj_partici_memb m
		  ON p.partici_memb_uni_no = m.partici_memb_uni_no
		WHERE p.partici_memb_uni_no = #{particiMembUniNo}
		<if test="ttl != null and ttl != '' ">
		AND ttl LIKE '%${ttl}%'
		</if>
		ORDER BY write_dt DESC
 	</select>
 	
 	<!-- 채팅 리스트 -->
 	<select id="chatList" resultType="SearchVO" parameterType="SearchVO">
 	SELECT 
    p.chat_no,
    p.chatr_no,
    p.chat_partici_memb_uni_no,
    p.cntn,
    p.write_dt,
    m.prj_uni_no
	FROM chat p
	JOIN chatr m ON p.chatr_no = m.chatr_no
	WHERE m.prj_uni_no = 'p66'
	<if test="cntn != null and cntn != '' ">
	AND cntn LIKE '%${cntn}%'
	</if> 
	ORDER BY write_dt DESC
 	</select>
 	
 </mapper>