<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.modu.app.site.notice.mapper.NoticeMapper">
  
  <!-- 	사이트 공지사항 리스트 -->
  <select id="noticeList" resultType="NoticeVO">
	  	SELECT notice_uni_no
	  		  , ttl
	  		  , memb_uni_no
	  		  , cntn
	  		  , erg_dt
	  		  , mod_dt 
	  	 FROM notice 
	 ORDER BY erg_dt DESC
  </select>
  
  <!-- 사이트 공지사항 인서트 -->
  <insert id="insertNotice" parameterType="NoticeVO">
  	<selectKey keyProperty="noticeUniNo" resultType="String" order="BEFORE">
			SELECT 'nt' || (MAX(TO_NUMBER(NVL(SUBSTR(notice_uni_no, 3),'0')))+1) FROM notice
	</selectKey>
  	INSERT INTO notice (
  						notice_uni_no
  						, ttl
  						, memb_uni_no
  						, cntn
  						, erg_dt
  						) 
  				VALUES (
  						#{noticeUniNo}
  						, #{ttl}
  						, 'm41'
  						, #{cntn}
  						, sysdate
  						) 
  </insert>
  
  </mapper>