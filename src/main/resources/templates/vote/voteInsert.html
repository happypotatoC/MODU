<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
<meta charset="UTF-8">
<title>Insert title here</title>



</head>

<body>
		<div class="row">
			<div class="card">
				<div class="card-header">
					<h4 class="card-title">투표생성</h4>
					<hr>
				</div>
				<div class="card-content">
						<div class="row">
						<div class="col-md-6 mb-4">
                                                <h6>장소</h6>
                                                <div class="form-group">
                                                     <select class="choices form-select" id="brdSel">
                                                     	<optgroup label="===게시판===">
                                                     		<option th:each="board:${boardList}" >[[${board.boardNm}]]</option>
                                                     	</optgroup>
                                                  		<optgroup label="===채팅방===">
                                                  			<option th:each="chat:${chatrList}">[[${chat}]]</option>
                                                  		</optgroup>
                                                    </select>
                                                </div>
                                            </div>
              
							<div class="form-group has-icon-left">
								<div class="position-relative">
									<input type="text" class="form-control"
										placeholder="투표 제목을 입력해주세요">
									<div class="form-control-icon">
										<i class="bi bi-pen" data-bs-toggle="tooltip" ></i>
									</div>
								</div>
							</div>
							<p></p>
						<div id ="inputCount">
							<div class="form-group has-icon-left">
								<div class="position-relative">
									<input type="text" class="form-control"
										placeholder="투표항목을 입력해주세요" >
									<div class="form-control-icon">
										<i class="bi bi-archive"></i>
									</div>
								</div>
							</div>
							<div class="form-group has-icon-left" id="item">
								<div class="position-relative">
									<input type="text" class="form-control"
										placeholder="투표항목을 입력해주세요" id="first-name-icon">
									<div class="form-control-icon">
										<i class="bi bi-archive"></i>
									</div>
								</div>
							</div>
						</div>
							<button type="button"
								class="btn btn-block btn-light-primary font-bold mt-3"
								onclick="insertItem()">+ 항목추가</button>
						</div>
						<p></p>
						<div class="form-group has-icon-left mx-auto p-4">
							<div class="position-relative">
								<input type="date" class="form-control">
								<div class="form-control-icon">
									<i class="bi-calendar"></i>
								</div>
							</div>
						</div>
						<p></p>
						<div class="col-12 d-flex justify-content-end">
							<button type="reset" class="btn btn-light-secondary me-1 mb-1">취소</button>
							<button type="button"  class="btn btn-primary me-1 mb-1">저장하기</button>
						</div>
				</div>
			</div>
		</div>
	<script src="assets/vendors/choices.js/choices.min.js"></script>
             <!--  <script type="text/javascript">
              fetch('/modu/voteInsertForm')
  			.then(res => res.json())
  			.then(data => {
  				console.log(data.boardNm);
  				let option = document.createElement('option')
  				let brdNm = document.querySelector('#brdNm')
  				let brdSel = document.querySelector('#brdSel')
  				console.log(brdNm);
  				console.log($('.choices__list'));
  				console.log(data.boardNm[0].boardNm);
  				for(let i = 0 ; i <data.boardNm.length ; i++ ){
  					option = document.createElement('option')
  					option.text = data.boardNm[i].boardNm;
  					//brdNm.append(option);
  					console.log(option)
  					brdSel.append(option);
  				}
  			})
  			.catch(err => console.log(err)); 
              </script> -->
		<script>
				let count = 2;
		
			function insertItem() {
				count ++;
				
				console.log(count);
				let div = document.createElement('div');
				let input = `
				<p></p>
				<div class="form-group has-icon-left">
					<div class="position-relative">
					<input type="text" class="form-control"
						placeholder="투표항목을 입력해주세요" id="first-name-icon">
					<div class="form-control-icon">
						<i class="bi bi-archive"></i>
					</div>
				</div>
				`
			if (count<=4){	
				$('#item').append(input);
				if(count == 4) {
					event.target.innerText ="더이상 항목을 늘릴 수 없습니다.";
					event.target.disabled=true;
				}
			}
			
				
			
			}
/* 			// JavaScript
			fetch('/modu/voteInsertForm')
			    .then(res => res.json())
			    .then(data => {
			        let brdNm = document.querySelector('#brdNm');
			        for (let i = 0; i < data.boardNm.length; i++) {
			            let option = document.createElement('option');
			            option.text = data.boardNm[i].boardNm;
			            brdNm.appendChild(option);
			        }
			    })
			    .catch(error => {
			        console.error('Error fetching data:', error);
			    }); */

			
 			
			/* $.ajax({
				url: "/modu/voteInsertForm",
				method:"GET",
				success: function(data){
					console.log(data);
					for(let i = 0 ; i <data.boardNm.length ; i++ ){
						$('#brdSel').append($('#brdNm').add($('<option/>').text(data.boardNm[i].boardNm)));
						
					}
				},
				error: function(err){
					console.log(err);
				}
			}) */
			/* $.ajax("voteInsertForm")
			.done(result=>{
				for(let i = 0 ; i <result.boardNm.length ; i++ ){
					console.log(result.boardNm[i].boardNm);
				 let option = `<option>${result.boardNm[i].boardNm}</option>`;
				 $('#brdNm').append(option);
				
				}
				})
				
				 // optgroup.add($("<option></option>")
				
				/* $('#brdNm').add($('<option/>').text(result.boardNm[i].boardNm)); 
				} */

		</script>
		    
</body>

</html>